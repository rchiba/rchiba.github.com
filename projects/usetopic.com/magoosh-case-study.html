<!DOCTYPE html><!--  Last Published: Mon Jul 01 2024 22:56:14 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5f0f8141205b70c6977171ea" data-wf-site="5d7bfb33d27da2d97219c009">
<head>
  <meta charset="utf-8">
  <title>How Magoosh Increased New Users with Topic</title>
  <meta content="Learn how Magoosh increased new users by 180% year-over-year after optimizing their content with Topic." name="description">
  <meta content="How Magoosh Increased New Users with Topic" property="og:title">
  <meta content="Learn how Magoosh increased new users by 180% year-over-year after optimizing their content with Topic." property="og:description">
  <meta content="How Magoosh Increased New Users with Topic" property="twitter:title">
  <meta content="Learn how Magoosh increased new users by 180% year-over-year after optimizing their content with Topic." property="twitter:description">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/topic.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Varela Round:400","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <link href="https://www.usetopic.com/magoosh-case-study" rel="canonical">
  <script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-154625711-1', 'auto');ga('send', 'pageview');</script><!--  Google Tag Manager  -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WBZKRML');</script>
  <!--  End Google Tag Manager  -->
  <!--  Segment  -->
  <script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.13.1";
  analytics.load("70kIvsme9NbN9yeRxYEsbKE7YzxW3qEz");
  analytics.page();
  }}();
</script>
  <!--  End Segment  -->
  <!--  Start VWO Async SmartCode  -->
  <script type="text/javascript">
window._vwo_code = window._vwo_code || (function(){
var account_id=545700,
settings_tolerance=2000,
library_tolerance=2500,
use_existing_jquery=false,
is_spa=1,
hide_element='body',
/* DO NOT EDIT BELOW THIS LINE */
f=false,d=document,code={use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){
window.settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b=hide_element?hide_element+'{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}':'',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('https://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&f='+(+is_spa)+'&r='+Math.random());return settings_timer; }};window._vwo_settings_timer = code.init(); return code; }());
</script>
  <!--  End VWO Async SmartCode  -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>
<body>
  <div class="h06 topic">
    <div class="h06_container magoosh">
      <div class="h06_block magoosh">
        <h1 class="h06_h1 magoosh">How Magoosh Increased New Users with Topic</h1>
        <p class="h06_text-2 magoosh">Learn how Magoosh increased new users on optimized pages by 180% year-over-year after optimizing their content with Topic.<br></p>
      </div>
    </div>
  </div>
  <div class="section">
    <div class="container-12 w-container"><img src="images/magoosh-case-study-chart.png" sizes="(max-width: 767px) 96vw, (max-width: 991px) 728px, (max-width: 1279px) 37vw, (max-width: 1439px) 44vw, (max-width: 1919px) 50vw, 940px" srcset="images/magoosh-case-study-chart-p-500.png 500w, images/magoosh-case-study-chart-p-800.png 800w, images/magoosh-case-study-chart-p-1080.png 1080w, images/magoosh-case-study-chart-p-1600.png 1600w, images/magoosh-case-study-chart.png 1974w" alt="" class="image-49 magoosh">
      <h3><strong>About Magoosh</strong></h3>
      <p class="paragraph-33"><br>
        <a href="https://magoosh.com/" target="_blank">Magoosh</a> provides affordable, accessible test prep for students studying for several major entrance exams such as the GRE, GMAT, SAT, and ACT. Students access study resources and live academic help through an online learning environment to ensure they are prepared for their exams.<br>‍
      </p><img src="images/magoosh-office.jpeg" loading="lazy" sizes="(max-width: 767px) 96vw, (max-width: 991px) 728px, (max-width: 1279px) 37vw, (max-width: 1439px) 44vw, (max-width: 1919px) 50vw, 940px" srcset="images/magoosh-office-p-500.jpeg 500w, images/magoosh-office.jpeg 1024w" alt="">
      <p class="paragraph-33"><br>A good percentage of our students find Magoosh via organic search. &quot;As a marketing channel, SEO is very important for us,&quot; says <a href="https://www.linkedin.com/in/naomi-tepper-marketing/" target="_blank">Naomi Tepper</a>, Senior Manager of Content Marketing.<br><br>&quot;We have a blog for every single exam that we support. These blogs provide anything a student needs to know while studying: study schedules, diagnostic tests, etc. Our whole goal is to help support students who are studying for these exams. We want to make sure they know they have a study partner.&quot;<br><br>After using Topic to optimize a set of 4 blog posts, <strong>Naomi saw an average 180% increase in new users year-over-year</strong> for the optimized content and the team now uses Topic in their everyday writing process.<br>‍</p>
      <h3><strong>The Challenge</strong></h3>
      <p class="paragraph-34"><br>&quot;At Magoosh, we have a 13-person content marketing team. Our goal is to make sure the team is creating content that is both useful to students and findable through Google. We try to put the best content we can out there in the world.&quot;<br><br>However, &quot;<strong>One of the biggest drags on our content marketing process is SEO scoping</strong>: identifying search intent, doing keyword research, and analyzing competitors. Historically, we used a variety of tools to create our own content briefs, which was an important but time-consuming process.<br><br></p><img src="images/magoosh-office-2.jpg" loading="lazy" sizes="(max-width: 767px) 96vw, (max-width: 991px) 728px, (max-width: 1279px) 37vw, (max-width: 1439px) 44vw, (max-width: 1919px) 50vw, 940px" srcset="images/magoosh-office-2-p-1080.jpeg 1080w, images/magoosh-office-2.jpg 1400w" alt="">
      <p class="paragraph-34">‍<br>“Ranking on Google is more complicated than it used to be. You have to be very aware of what the users are searching for, how to best answer their queries, and how to position your piece. Because if your content doesn&#x27;t rank on page one, or even in many cases positions 1-3, you&#x27;re not going to reach your audience.&quot;<br><br></p>
      <h3><strong>The Solution</strong></h3>
      <p class="paragraph-35"><br>Naomi started searching for a solution to streamline the research process.<br><br>&quot;We were looking for a tool that could take care of all the heavy lifting. What made Topic appealing was that it could do that and also be accessible for anyone on our team. The hope was that it would speed up our content development process while also improving our rankings.&quot;<br><br>As a test, Naomi and her team took 4 blog posts and optimized them exclusively with Topic.<br><br>Luckily, the process was relatively simple. &quot;It&#x27;s the kind of tool that anybody on our team can understand and pick up quickly. Unlike other SEO tools that sometimes feel like they require a Ph.D. to understand.&quot;<br><br>Topic&#x27;s Content Briefs provided guidance on what students would be interested in learning the most, allowing the writers to naturally enhance their outdated content and make it more valuable. The writers then used the Content Grader to find and fill in gaps for each post.<br><br></p><img src="images/topic-magoosh-screenshot.png" sizes="(max-width: 767px) 96vw, (max-width: 991px) 728px, (max-width: 1279px) 37vw, (max-width: 1439px) 44vw, (max-width: 1919px) 50vw, 940px" srcset="images/topic-magoosh-screenshot-p-800.png 800w, images/topic-magoosh-screenshot-p-1080.png 1080w, images/topic-magoosh-screenshot-p-1600.png 1600w, images/topic-magoosh-screenshot-p-2000.png 2000w, images/topic-magoosh-screenshot-p-2600.png 2600w, images/topic-magoosh-screenshot.png 2668w" alt="" class="image-51">
      <h3><strong>The Results</strong></h3>
      <p class="paragraph-36"><br>After three weeks, the results spoke for themselves.<br><br>&quot;On one blog post, <strong>we increased new users by over 300% year-over-year</strong>, and added 70 page-one keywords, and 40 keywords in positions 1-3. We also achieved position 2 for our primary keyword.&quot;<br><br></p><img src="images/magoosh-case-study.png" sizes="(max-width: 767px) 96vw, (max-width: 991px) 728px, (max-width: 1279px) 37vw, (max-width: 1439px) 44vw, (max-width: 1919px) 50vw, 940px" srcset="images/magoosh-case-study-p-500.png 500w, images/magoosh-case-study-p-800.png 800w, images/magoosh-case-study-p-1080.png 1080w, images/magoosh-case-study.png 1600w" alt="" class="image-42">
      <p class="paragraph-37"><br>&quot;What impressed us the most is the fact that it effectively achieved better rankings and traffic without a lot of extra work.&quot;<br><br>Topic is now an essential part of Magoosh’ content creation process.<br><br>&quot;I like that Topic is listening to users and creating a better product. It&#x27;s a unique opportunity to be a part of something that&#x27;s developing and growing.&quot;<br>‍<br></p>
      <div class="t01_container">
        <h3 class="t01_quote">&quot;</h3>
        <h3 class="t01_h3">Topic has allowed us to streamline our content scoping process while still creating content that ranks.</h3>
        <div class="t01_team_wrap"><img src="images/naomi_tepper.png" alt="" class="t01_image magoosh">
          <div class="t01_name">Naomi Tepper</div>
          <div class="t01_job_title magoosh">Senior Manager of Content Marketing at Magoosh</div>
        </div>
      </div>
    </div>
  </div>
  <div class="section-strip">
    <div class="container-full-2 w-container">
      <div class="strip-wrapper">
        <h2 class="h2">Start Writing Better Content Today</h2>
        <div class="button-row">
          <a href="https://app.usetopic.com/profile/sign_up?trial=true" class="h08_button case-study trial landing w-button">$7 for Your First 3 Content Briefs</a>
          <a href="#" data-w-id="861fe19c-13b4-7bf6-b5ec-68b413081552" class="h08_button case-study w-button">Request Demo</a>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div class="f07">
      <div class="f07_container">
        <div class="f07_top_wrap"><img src="images/logo-rectangle.png" width="130" alt="logo" height="50" class="f07_logo">
          <div class="f07_wrap_right">
            <a href="#" class="f07_link w-inline-block">
              <div class="f07_text">3739 Balboa Street, Unit #5043<br>San Francisco, CA 94121<br></div>
            </a>
          </div>
        </div>
        <div class="f07_bottom_wrap">
          <div class="div-block-169">
            <div class="footer-heading">Solutions</div>
            <a href="content-optimization.html" target="_blank" class="link-12 footer-link">Content Optimization</a>
            <a href="content-writing-tool.html" target="_blank" class="link-12 footer-link">Content Writing</a>
            <a href="content-analysis-tool.html" target="_blank" class="link-12 footer-link">Content Analysis</a>
            <a href="copilot.html" class="link-12 footer-link">Copilot</a>
          </div>
          <div class="div-block-169">
            <div class="footer-heading">Compare<br>‍</div>
            <a href="clearscope-alternative.html" target="_blank" class="link-12 footer-link">Clearscope</a>
            <a href="https://www.usetopic.com/blog/the-best-marketmuse-alternative-for-content-briefs-creation/" target="_blank" class="link-12 footer-link">Marketmuse</a>
            <a href="https://www.usetopic.com/blog/surfer-seo-alternatives/" target="_blank" class="link-12 footer-link">Surfer SEO</a>
            <a href="https://www.usetopic.com/blog/frase-alternative/" target="_blank" class="link-12 footer-link">Frase</a>
          </div>
          <div>
            <div class="footer-heading">Links<br>‍</div>
            <div>
              <a href="privacy.html" target="_blank" class="link-12 footer-link">Privacy Policy</a>
            </div>
            <div class="div-block-170">
              <a href="terms-of-service.html" target="_blank" class="link-12 footer-link">Terms of Service</a>
            </div>
            <div class="div-block-170">
              <a href="affiliates.html" class="link-12 footer-link">Affiliate Program</a>
            </div>
            <div class="div-block-170">
              <a href="https://usetopic.zendesk.com/" target="_blank" class="link-12 footer-link">Support</a>
            </div>
            <div class="div-block-170">
              <a href="https://www.linkedin.com/company/usetopic/" target="_blank" class="link-12 footer-link">LinkedIn</a>
            </div>
            <div class="div-block-170">
              <a href="https://www.youtube.com/channel/UCHNv36uTw_O3lkoiP_uwGqQ" target="_blank" class="link-12 footer-link">YouTube</a>
            </div>
            <div class="div-block-170">
              <a href="https://status.usetopic.com/" target="_blank" class="link-12 footer-link">Status Page</a>
            </div>
          </div>
          <div>
            <div class="footer-heading">Resources</div>
            <div class="div-block-170">
              <a href="https://www.usetopic.com/blog" target="_blank" class="link-12 footer-link">Topic Blog</a>
            </div>
            <div class="div-block-170">
              <a href="https://www.usetopic.com/wordpress-table-of-contents" target="_blank" class="link-12 footer-link">Table of Contents Tool</a>
            </div>
            <div class="div-block-170">
              <a href="archived/blog-idea-generator.html" target="_blank" class="link-12 footer-link">Blog Idea Tool</a>
            </div>
            <div class="div-block-170">
              <a href="people-also-ask.html" target="_blank" class="link-12 footer-link">People Also Ask Tool</a>
            </div>
            <div class="div-block-170">
              <a href="the-ultimate-guide-to-writing-seo-content-in-2020.html" target="_blank" class="link-12 footer-link">SEO Content Guide</a>
            </div>
          </div>
          <div class="f07_legal footer-heading">©2021 Chia Labs Inc. All rights reserved.</div>
        </div>
      </div>
      <div data-w-id="1a10e1cb-1fb2-efcc-86e6-e31288499ee9" class="modal-wrapper">
        <div class="m02 demo-modal"><img src="images/logo-square.png" alt="" class="m02_icon">
          <div class="m02_title demo-modal">Request a Demo</div>
          <div class="div-block-126">
            <div class="text-block-43">After filling out this form, you&#x27;ll receive a link<br>to book a time with us.</div>
          </div>
          <div class="html-embed demo-embed w-embed w-script">
            <script charset="utf-8" type="text/javascript" src="https://js.hsforms.net/forms/shell.js"></script>
            <script>
  hbspt.forms.create({
	portalId: "6847770",
	formId: "1afa2b4e-0dc5-4741-9e73-cc5f3358f961"
});
</script>
          </div>
          <a href="#" class="m02_exit w-inline-block"><img src="images/x_1.svg" width="16.5" data-w-id="1a10e1cb-1fb2-efcc-86e6-e31288499ef5" alt=""></a>
        </div>
      </div>
    </div>
  </div>
  <header class="temp_nav_wrap">
    <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="temp_nav w-nav">
      <div class="div-block-179">
        <div class="text-block-66">🎉 Announcement: We&#x27;ve joined the CafeMedia family — <a href="https://www.usetopic.com/blog/announcement-weve-joined-the-cafemedia-family/" target="_blank" class="link-34">read more here</a>.</div>
      </div>
      <div class="temp_nav_container">
        <a href="index.html" class="temp_logo w-nav-brand"><img src="images/logo-rectangle.png" width="120" alt="" class="temp_logo_image"></a>
        <div class="temp_nav_right">
          <div class="temp_nav_links">
            <nav role="navigation" class="temp_nav_menu w-nav-menu">
              <a href="customers.html" class="temp_nav_link w-nav-link">Customers</a>
              <a href="agency.html" class="temp_nav_link w-nav-link">For Agencies</a>
              <a href="pricing.html" class="temp_nav_link w-nav-link">Pricing</a>
              <a href="about.html" class="temp_nav_link w-nav-link">About</a>
              <div data-hover="true" data-delay="100" class="nav03_dropdown topic w-dropdown">
                <div class="nav03_link w-dropdown-toggle">
                  <div class="navigation-text">Resources</div>
                </div>
                <nav class="nav03_dropdown_list w-dropdown-list">
                  <div class="nav03_dropdown_base">
                    <a href="people-also-ask.html" class="nav03_dropdown_link w-inline-block"><img src="images/question_icon_black.svg" alt="" class="nav03_image">
                      <div class="nav03_text">People Also Ask</div>
                    </a>
                  </div>
                  <div class="nav03_dropdown_base">
                    <a href="archived/blog-idea-generator.html" class="nav03_dropdown_link w-inline-block"><img src="images/feather.svg" alt="" class="nav03_image">
                      <div class="nav03_text">Idea Generator</div>
                    </a>
                  </div>
                  <div class="nav03_dropdown_base">
                    <a href="https://www.usetopic.com/wordpress-table-of-contents" target="_blank" class="nav03_dropdown_link w-inline-block"><img src="images/sidebar.svg" alt="" class="nav03_image">
                      <div class="nav03_text">Table of Contents Generator</div>
                    </a>
                  </div>
                  <div class="nav03_dropdown_base">
                    <a href="https://www.usetopic.com/blog-post-length" target="_blank" class="nav03_dropdown_link w-inline-block"><img src="images/target.svg" alt="" class="nav03_image">
                      <div class="nav03_text">Word Count Calculator</div>
                    </a>
                  </div>
                  <div class="nav03_dropdown_base">
                    <a href="https://www.usetopic.com/blog" target="_blank" class="nav03_dropdown_link w-inline-block"><img src="images/layers.svg" alt="" class="nav03_image">
                      <div class="nav03_text">Topic Blog</div>
                    </a>
                  </div>
                </nav>
              </div>
              <a href="https://app.usetopic.com/" class="temp_nav_link w-nav-link">Sign In</a>
              <a href="#" data-w-id="a25e47e5-7a6e-7014-a213-0750f4feb4cf" class="temp_nav_link w-nav-link">Request Demo</a>
            </nav>
          </div>
          <a href="https://app.usetopic.com/profile/sign_up?trial=true" class="temp_nav_button trial w-button">Try it for Just $7</a>
          <a href="#" data-w-id="0a531577-bd47-d0a2-b8fd-e8708512379b" class="temp_nav_button w-button">REQUEST DEMO</a>
        </div>
      </div>
    </div>
    <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="temp_mobile w-nav">
      <div class="div-block-179">
        <div class="text-block-66">🎉 Announcement: We&#x27;ve joined the CafeMedia family — <a href="https://www.usetopic.com/blog/announcement-weve-joined-the-cafemedia-family/" target="_blank" class="link-35">read more here</a>.</div>
      </div>
      <div class="temp_mobile_wrap">
        <a href="index.html" class="temp_logo w-nav-brand"><img src="images/logo-rectangle.png" width="120" alt="" class="temp_logo_image"></a>
        <div class="temp_right">
          <div class="temp_links">
            <nav role="navigation" class="temp_nav_menu_main w-nav-menu">
              <a href="customers.html" class="temp_nav_link_main w-nav-link">Customers</a>
              <a href="agency.html" class="temp_nav_link_main w-nav-link">For Agencies</a>
              <a href="archived/pricing-mar2021.html" class="temp_nav_link_main w-nav-link">Pricing</a>
              <a href="about.html" class="temp_nav_link_main w-nav-link">About</a>
              <a href="contact.html" class="temp_nav_link_main w-nav-link">Contact</a>
              <a href="people-also-ask.html" class="temp_nav_link_main w-nav-link">Free Tool - People Also Asker</a>
              <a href="#" class="temp_nav_link_main w-nav-link">SEO Content Guide</a>
              <a href="https://app.usetopic.com/" class="temp_nav_link_main w-nav-link">Sign In</a>
            </nav>
          </div>
          <div class="temp_nav_btn w-nav-button">
            <div class="temp_icon w-icon-nav-menu"></div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5d7bfb33d27da2d97219c009" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script><!--  Google Tag Manager (noscript)  -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WBZKRML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!--  End Google Tag Manager (noscript)  -->
  <!--  Start of Custom Code -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
  <style>
  .trial-error{
    position: absolute;
    top: 44px;
    color: red;
    width: 100%;
    padding-right: 20px;
  }
</style>
  <script>
  // This file is used on webflow as a custom script and is stored in this repository to keep it in version control
  // If you update this, then you will need to login to webflow and update the page. The app does not serve this code!
  $(document).ready(function(){
    var formState = 'collectingURL';
    var url, keyword, email;
    function isUrl(s) {
     var regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
     return regexp.test(s);
    }
    function isEmail(email) {
      var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(String(email).toLowerCase());
    }
    function isWorkEmail(email){
      var re = /@gmail\.com|@yahoo\.com|@protonmail\.com|@aol\.com|@gmx\.com|@yandex\.ru|@icloud\.com/ 
      return !re.test(String(email).toLowerCase());
    }
    function showValidationError(message){
      $('.trial-error').remove();
      $('.trial-form input[type="text"]').attr('style', 'border: 1px solid red');
      $('<div class="trial-error">'+message+'</div>').insertAfter('.trial-form input[type="text"]');
    }
    function resetValidation(){
      $('.trial-form input[type="text"]').attr('style', '');
      $('.trial-form .trial-error').remove();
    }
    function getCookie(name) {
      var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
      return v ? v[2] : null;
    }
    function submitAndRedirect(){
      var portalId = '6847770';
      var formGuid = '16839211-027c-416b-a352-0479de227ea7';
      $.ajax({
        url: `https://api.hsforms.com/submissions/v3/integration/submit/${portalId}/${formGuid}`, 
        type: 'POST',
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({
          fields:[{
            name: 'email',
            value: email
          },{
            name: 'trial_keyword',
            value: keyword
          },{
            name: 'trial_url',
            value: url
          }],
          context:{
            hutk: getCookie('hubspotutk'),
            pageUri: window.location.href,
            pageName: document.title 
          }
        })
      }).done(function(){
        console.log('form submitted, redirecting');
        window.location.href = `https://app.usetopic.com/anon?email=${encodeURIComponent(email)}&keyword=${encodeURIComponent(keyword)}&url=${encodeURIComponent(url)}`
      }).fail(function(){
        showValidationError('Something went wrong, please contact support@usetopic.com');
      });
    }
    function initializeForm(){
      $('.trial-form input[type="submit"]').click(function(e){
        e.preventDefault();
        e.stopPropagation();
        if(formState === 'collectingURL'){
          url = $('.trial-form input[type="text"]').val().trim();
          if(!isUrl(url)){
            showValidationError('Please enter a valid URL');
          } else {
            resetValidation();
            $('.trial-form input[type="text"]').val('').attr('placeholder', 'keyword');
            $('.trial-form label').text('Enter the main keyword for the blog post');
            $('.trial-form input[type="submit"]').attr('value', 'Continue');
            formState = 'collectingKeyword';
          }
        } else if(formState === 'collectingKeyword'){
          keyword = $('.trial-form input[type="text"]').val().trim();
          if(_.isEmpty(keyword)){
            showValidationError('Please enter a valid keyword');
          } else {
            resetValidation();
            $('.trial-form input[type="text"]').val('').attr('placeholder', 'email@example.com');
            $('.trial-form label').text('Enter your work email');
            $('.trial-form input[type="submit"]').attr('value', 'Get Access');
            formState = 'collectingEmail';
          }
        } else if(formState === 'collectingEmail'){
          email = $('.trial-form input[type="text"]').val().trim(); 
          if(!isEmail(email)){
            showValidationError('Please enter valid email');
          }else if(!isWorkEmail(email)){
            showValidationError('Please enter a work email address');
          }else {
            // submit the form to hubspot, then redirect to the application to create the anonymous report
            console.log(url, keyword, email);
            submitAndRedirect();
          }
        }
      });
    }
    initializeForm();
  });
</script>
</body>
</html>